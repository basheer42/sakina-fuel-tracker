"use strict";{function e(e){document.querySelectorAll(e).forEach((function(e){e.classList.remove("hidden")}))}function t(e){document.querySelectorAll(e).forEach((function(e){e.classList.add("hidden")}))}function n(n){t(n.acrossClears),e(n.acrossQuestions),t(n.allContainer)}function o(n){e(n.acrossClears),t(n.acrossQuestions),document.querySelector(n.actionContainer).classList.remove(n.selectedClass),e(n.allContainer),t(n.counterContainer)}function c(n){t(n.acrossClears),t(n.acrossQuestions),t(n.allContainer),e(n.counterContainer)}function a(e){c(e);document.querySelectorAll(e.acrossInput).forEach((function(e){e.value=0})),document.querySelector(e.actionContainer).classList.remove(e.selectedClass)}function s(e,t,o){o?n(t):c(t),e.forEach((function(e){e.checked=o,e.closest("tr").classList.toggle(t.selectedClass,o)}))}function i(e,t){const o=Array.from(e).filter((function(e){return e.checked})).length,c=document.querySelector(t.counterContainer),s=Number(c.dataset.actionsIcnt);c.textContent=interpolate(ngettext("%(sel)s of %(cnt)s selected","%(sel)s of %(cnt)s selected",o),{sel:o,cnt:s},!0);const i=document.getElementById(t.allToggleId);i.checked=o===e.length,i.checked?n(t):a(t)}const l={actionContainer:"div.actions",counterContainer:"span.action-counter",allContainer:"div.actions span.all",acrossInput:"div.actions input.select-across",acrossQuestions:"div.actions span.question",acrossClears:"div.actions span.clear",allToggleId:"action-toggle",selectedClass:"selected"};function r(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)}window.Actions=function(e,t){t=Object.assign({},l,t);let n=!1,c=null,r=!1;document.addEventListener("keydown",(e=>{r=e.shiftKey})),document.addEventListener("keyup",(e=>{r=e.shiftKey})),document.getElementById(t.allToggleId).addEventListener("click",(function(n){s(e,t,this.checked),i(e,t)})),document.querySelectorAll(t.acrossQuestions+" a").forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault();document.querySelectorAll(t.acrossInput).forEach((function(e){e.value=1})),o(t)}))})),document.querySelectorAll(t.acrossClears+" a").forEach((function(n){n.addEventListener("click",(function(n){n.preventDefault(),document.getElementById(t.allToggleId).checked=!1,a(t),s(e,t,!1),i(e,t)}))})),Array.from(document.getElementById("result_list").tBodies).forEach((function(o){o.addEventListener("change",(function(o){const a=o.target;if(a.classList.contains("action-select")){const n=function(t,n){if(!c||!n||c===t)return[t];const o=Array.from(e),a=o.findIndex((e=>e===t)),s=o.findIndex((e=>e===c)),i=Math.min(a,s),l=Math.max(a,s);return o.filter(((e,t)=>i<=t&&t<=l))}(a,r);s(n,t,a.checked),i(e,t),c=a}else n=!0}))})),document.querySelector("#changelist-form button[name=index]").addEventListener("click",(function(e){if(n){confirm(gettext("You have unsaved changes on individual editable fields. If you run an action, your unsaved changes will be lost."))||e.preventDefault()}}));const u=document.querySelector("#changelist-form input[name=_save]");u&&u.addEventListener("click",(function(e){if(document.querySelector("[name=action]").value){const t=n?gettext("You have selected an action, but you haven’t saved your changes to individual fields yet. Please click OK to save. You’ll need to re-run the action."):gettext("You have selected an action, and you haven’t made any changes on individual fields. You’re probably looking for the Go button rather than the Save button.");confirm(t)||e.preventDefault()}})),window.addEventListener("pageshow",(n=>i(e,t)))},r((function(){const e=document.querySelectorAll("tr input.action-select");e.length>0&&Actions(e)}))}